# ğŸ“– Hiá»ƒu RÃµ Há»‡ Thá»‘ng - HÆ°á»›ng Dáº«n Cho NgÆ°á»i Non-Tech

TÃ i liá»‡u nÃ y giáº£i thÃ­ch chi tiáº¿t cÃ¡ch há»‡ thá»‘ng **Predictive Maintenance (Báº£o TrÃ¬ Dá»± ÄoÃ¡n)** hoáº¡t Ä‘á»™ng, dÃ nh cho nhá»¯ng ngÆ°á»i khÃ´ng cÃ³ background ká»¹ thuáº­t.

---

## ğŸ¯ Má»¥c ÄÃ­ch Cá»§a Há»‡ Thá»‘ng

Há»‡ thá»‘ng nÃ y giÃºp **dá»± Ä‘oÃ¡n trÆ°á»›c khi xe Ä‘iá»‡n bá»‹ há»ng**, giá»‘ng nhÆ° bÃ¡c sÄ© dá»± Ä‘oÃ¡n bá»‡nh nhÃ¢n cÃ³ thá»ƒ bá»‹ bá»‡nh gÃ¬ dá»±a trÃªn cÃ¡c chá»‰ sá»‘ sá»©c khá»e.

**VÃ­ dá»¥ thá»±c táº¿:**

- Thay vÃ¬ Ä‘á»£i xe há»ng má»›i sá»­a (tá»‘n kÃ©m, nguy hiá»ƒm)
- Há»‡ thá»‘ng phÃ¢n tÃ­ch dá»¯ liá»‡u tá»« cÃ¡c cáº£m biáº¿n trÃªn xe
- Dá»± Ä‘oÃ¡n: "Xe nÃ y cÃ³ 80% kháº£ nÄƒng há»ng pin trong 30 ngÃ y tá»›i"
- â†’ Chá»§ xe cÃ³ thá»ƒ sá»­a chá»¯a phÃ²ng ngá»«a trÆ°á»›c khi há»ng

---

## ğŸ”¤ Giáº£i ThÃ­ch CÃ¡c Tá»« KhÃ³a ChuyÃªn MÃ´n

### 1. **Predictive Maintenance (Báº£o TrÃ¬ Dá»± ÄoÃ¡n)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: Báº£o trÃ¬ dá»±a trÃªn dá»± Ä‘oÃ¡n, khÃ´ng pháº£i Ä‘á»£i há»ng má»›i sá»­a
- **VÃ­ dá»¥**: Giá»‘ng nhÆ° báº¡n Ä‘i khÃ¡m sá»©c khá»e Ä‘á»‹nh ká»³ Ä‘á»ƒ phÃ¡t hiá»‡n bá»‡nh sá»›m
- **Lá»£i Ã­ch**: Tiáº¿t kiá»‡m chi phÃ­, trÃ¡nh há»ng hÃ³c báº¥t ngá»

### 2. **Machine Learning (Há»c MÃ¡y) / AI**

- **NghÄ©a Ä‘Æ¡n giáº£n**: MÃ¡y tÃ­nh tá»± há»c tá»« dá»¯ liá»‡u Ä‘á»ƒ Ä‘Æ°a ra dá»± Ä‘oÃ¡n
- **VÃ­ dá»¥**: Giá»‘ng nhÆ° báº¡n há»c lÃ¡i xe, cÃ ng lÃ¡i nhiá»u cÃ ng giá»i
- **Trong há»‡ thá»‘ng**: MÃ¡y tÃ­nh há»c tá»« hÃ ng nghÃ¬n báº£n ghi dá»¯ liá»‡u xe Ä‘á»ƒ biáº¿t "xe nÃ o sáº¯p há»ng"

### 3. **Model (MÃ´ HÃ¬nh)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: CÃ´ng thá»©c/bá»™ quy táº¯c mÃ  mÃ¡y tÃ­nh Ä‘Ã£ há»c Ä‘Æ°á»£c
- **VÃ­ dá»¥**: Giá»‘ng nhÆ° cÃ´ng thá»©c náº¥u Äƒn - báº¡n cho nguyÃªn liá»‡u vÃ o, ra mÃ³n Äƒn
- **Trong há»‡ thá»‘ng**: Cho dá»¯ liá»‡u cáº£m biáº¿n vÃ o â†’ Model â†’ Dá»± Ä‘oÃ¡n lá»—i

### 4. **Training (Huáº¥n Luyá»‡n)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: QuÃ¡ trÃ¬nh dáº¡y mÃ¡y tÃ­nh há»c tá»« dá»¯ liá»‡u
- **VÃ­ dá»¥**: Giá»‘ng nhÆ° há»c sinh há»c bÃ i tá»« sÃ¡ch giÃ¡o khoa
- **Trong há»‡ thá»‘ng**: Cho mÃ¡y tÃ­nh xem 100,000 báº£n ghi dá»¯ liá»‡u xe â†’ MÃ¡y há»c pattern â†’ Táº¡o ra model

### 5. **Inference (Suy Luáº­n / Dá»± ÄoÃ¡n)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: Sá»­ dá»¥ng model Ä‘Ã£ há»c Ä‘á»ƒ dá»± Ä‘oÃ¡n trÃªn dá»¯ liá»‡u má»›i
- **VÃ­ dá»¥**: Sau khi há»c xong, há»c sinh lÃ m bÃ i kiá»ƒm tra
- **Trong há»‡ thá»‘ng**: Nháº­n dá»¯ liá»‡u cáº£m biáº¿n má»›i â†’ DÃ¹ng model â†’ Tráº£ vá» dá»± Ä‘oÃ¡n

### 6. **Anomaly (Báº¥t ThÆ°á»ng)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: Äiá»u gÃ¬ Ä‘Ã³ khÃ¡c thÆ°á»ng, khÃ´ng bÃ¬nh thÆ°á»ng
- **VÃ­ dá»¥**: Nhiá»‡t Ä‘á»™ cÆ¡ thá»ƒ 40Â°C lÃ  báº¥t thÆ°á»ng (bÃ¬nh thÆ°á»ng lÃ  37Â°C)
- **Trong há»‡ thá»‘ng**: PhÃ¡t hiá»‡n cÃ¡c giÃ¡ trá»‹ cáº£m biáº¿n báº¥t thÆ°á»ng â†’ CÃ³ thá»ƒ lÃ  dáº¥u hiá»‡u há»ng hÃ³c

### 7. **Feature (Äáº·c TrÆ°ng / Thuá»™c TÃ­nh)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: CÃ¡c thÃ´ng tin Ä‘áº§u vÃ o Ä‘á»ƒ dá»± Ä‘oÃ¡n
- **VÃ­ dá»¥**: Äá»ƒ dá»± Ä‘oÃ¡n bá»‡nh, bÃ¡c sÄ© cáº§n: nhiá»‡t Ä‘á»™, huyáº¿t Ã¡p, nhá»‹p tim
- **Trong há»‡ thá»‘ng**: Nhiá»‡t Ä‘á»™ pin, Ä‘iá»‡n Ã¡p, sá»‘ chu ká»³ sáº¡c, tá»‘c Ä‘á»™, v.v.

### 8. **API (Application Programming Interface)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: Cá»­a ngÃµ Ä‘á»ƒ cÃ¡c há»‡ thá»‘ng khÃ¡c giao tiáº¿p vá»›i há»‡ thá»‘ng cá»§a báº¡n
- **VÃ­ dá»¥**: Giá»‘ng nhÆ° menu nhÃ  hÃ ng - báº¡n chá»n mÃ³n, nhÃ  báº¿p náº¥u, mang ra
- **Trong há»‡ thá»‘ng**: Gá»­i dá»¯ liá»‡u cáº£m biáº¿n â†’ API â†’ Nháº­n káº¿t quáº£ dá»± Ä‘oÃ¡n

### 9. **Endpoint (Äiá»ƒm Cuá»‘i)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: Äá»‹a chá»‰ cá»¥ thá»ƒ trong API Ä‘á»ƒ thá»±c hiá»‡n má»™t chá»©c nÄƒng
- **VÃ­ dá»¥**: `/predict` = "TÃ´i muá»‘n dá»± Ä‘oÃ¡n", `/health` = "Kiá»ƒm tra há»‡ thá»‘ng cÃ³ hoáº¡t Ä‘á»™ng khÃ´ng"
- **Trong há»‡ thá»‘ng**:
  - `POST /predict` â†’ Gá»­i dá»¯ liá»‡u, nháº­n dá»± Ä‘oÃ¡n
  - `GET /health` â†’ Kiá»ƒm tra há»‡ thá»‘ng

### 10. **Metrics (Chá»‰ Sá»‘ / Sá»‘ Liá»‡u)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: CÃ¡c con sá»‘ Ä‘o lÆ°á»ng hiá»‡u suáº¥t há»‡ thá»‘ng
- **VÃ­ dá»¥**: Sá»‘ lÆ°á»£ng khÃ¡ch hÃ ng/ngÃ y, thá»i gian phá»¥c vá»¥ trung bÃ¬nh
- **Trong há»‡ thá»‘ng**: Sá»‘ request/giÃ¢y, thá»i gian xá»­ lÃ½, sá»‘ láº§n phÃ¡t hiá»‡n anomaly

### 11. **Monitoring (GiÃ¡m SÃ¡t)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: Theo dÃµi, quan sÃ¡t há»‡ thá»‘ng hoáº¡t Ä‘á»™ng
- **VÃ­ dá»¥**: Giá»‘ng nhÆ° dashboard xe hÆ¡i hiá»ƒn thá»‹ tá»‘c Ä‘á»™, nhiÃªn liá»‡u
- **Trong há»‡ thá»‘ng**: Dashboard hiá»ƒn thá»‹: há»‡ thá»‘ng cÃ³ Ä‘ang cháº¡y khÃ´ng, cÃ³ bao nhiÃªu request, cÃ³ lá»—i gÃ¬ khÃ´ng

### 12. **Alert (Cáº£nh BÃ¡o)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: ThÃ´ng bÃ¡o khi cÃ³ Ä‘iá»u gÃ¬ báº¥t thÆ°á»ng
- **VÃ­ dá»¥**: Äiá»‡n thoáº¡i bÃ¡o pin yáº¿u, hoáº·c cáº£nh bÃ¡o nhiá»‡t Ä‘á»™ cao
- **Trong há»‡ thá»‘ng**: "CÃ³ quÃ¡ nhiá»u anomaly trong 2 phÃºt!" â†’ Gá»­i cáº£nh bÃ¡o

### 13. **Kafka (Message Queue)**

- **NghÄ©a Ä‘Æ¡n giáº£n**: Há»‡ thá»‘ng chuyá»ƒn tin nháº¯n giá»¯a cÃ¡c pháº§n cá»§a há»‡ thá»‘ng
- **VÃ­ dá»¥**: Giá»‘ng nhÆ° bÆ°u Ä‘iá»‡n - nháº­n thÆ° tá»« ngÆ°á»i gá»­i, chuyá»ƒn Ä‘áº¿n ngÆ°á»i nháº­n
- **Trong há»‡ thá»‘ng**: Khi phÃ¡t hiá»‡n anomaly â†’ Gá»­i vÃ o Kafka â†’ Alert Service nháº­n â†’ Xá»­ lÃ½ cáº£nh bÃ¡o

### 14. **Docker / Container**

- **NghÄ©a Ä‘Æ¡n giáº£n**: CÃ´ng nghá»‡ Ä‘Ã³ng gÃ³i á»©ng dá»¥ng vÃ  mÃ´i trÆ°á»ng cháº¡y vÃ o má»™t "há»™p" riÃªng
- **VÃ­ dá»¥**: Giá»‘ng nhÆ° container váº­n chuyá»ƒn - má»—i container cÃ³ mÃ´i trÆ°á»ng riÃªng, khÃ´ng áº£nh hÆ°á»Ÿng nhau
- **Lá»£i Ã­ch**: Cháº¡y giá»‘ng nhau trÃªn má»i mÃ¡y tÃ­nh, dá»… quáº£n lÃ½

### 15. **MLflow**

- **NghÄ©a Ä‘Æ¡n giáº£n**: Há»‡ thá»‘ng quáº£n lÃ½ vÃ  theo dÃµi cÃ¡c láº§n training model
- **VÃ­ dá»¥**: Giá»‘ng nhÆ° sá»• ghi chÃ©p thÃ­ nghiá»‡m - ghi láº¡i má»—i láº§n thá»­, káº¿t quáº£, model nÃ o tá»‘t nháº¥t
- **Trong há»‡ thá»‘ng**: LÆ°u láº¡i má»—i láº§n train, so sÃ¡nh model cÅ© vÃ  má»›i, chá»n model tá»‘t nháº¥t

---

## ğŸ”„ Workflow Chi Tiáº¿t - Há»‡ Thá»‘ng Hoáº¡t Äá»™ng NhÆ° Tháº¿ NÃ o?

### GIAI ÄOáº N 1: CHUáº¨N Bá»Š Dá»® LIá»†U VÃ€ TRAINING (Huáº¥n Luyá»‡n)

#### BÆ°á»›c 1: CÃ³ Dá»¯ Liá»‡u

```
ğŸ“Š Dá»¯ liá»‡u tá»« cáº£m biáº¿n xe Ä‘iá»‡n
â”œâ”€â”€ Nhiá»‡t Ä‘á»™ pin: 25Â°C, 30Â°C, 95Â°C...
â”œâ”€â”€ Äiá»‡n Ã¡p: 350V, 200V...
â”œâ”€â”€ Sá»‘ chu ká»³ sáº¡c: 50, 100, 2000...
â”œâ”€â”€ Tá»‘c Ä‘á»™: 60km/h, 120km/h...
â””â”€â”€ ... (26 thÃ´ng sá»‘ khÃ¡c)
```

**Giáº£i thÃ­ch**: Giá»‘ng nhÆ° bá»‡nh Ã¡n bá»‡nh nhÃ¢n - ghi láº¡i táº¥t cáº£ thÃ´ng tin quan trá»ng.

#### BÆ°á»›c 2: Training Model Anomaly (PhÃ¡t Hiá»‡n Báº¥t ThÆ°á»ng)

**File**: `src/anomaly.py`

**QuÃ¡ trÃ¬nh**:

1. Äá»c dá»¯ liá»‡u tá»« file CSV
2. Chá»n 9 thÃ´ng sá»‘ quan trá»ng nháº¥t (nhiá»‡t Ä‘á»™, Ä‘iá»‡n Ã¡p, tá»‘c Ä‘á»™...)
3. **Isolation Forest** (thuáº­t toÃ¡n) há»c pattern "bÃ¬nh thÆ°á»ng"
4. ÄÃ¡nh dáº¥u nhá»¯ng Ä‘iá»ƒm "khÃ¡c thÆ°á»ng" â†’ Gá»i lÃ  **Anomaly**
5. LÆ°u model vÃ o `models/anomaly/`

**VÃ­ dá»¥ dá»… hiá»ƒu**:

- Há»c sinh bÃ¬nh thÆ°á»ng: Ä‘iá»ƒm 5-10
- Isolation Forest há»c: "Äiá»ƒm 5-10 lÃ  bÃ¬nh thÆ°á»ng"
- Gáº·p Ä‘iá»ƒm 0 hoáº·c 20 â†’ "Báº¥t thÆ°á»ng!"

**Káº¿t quáº£**: File `data/features_with_anomaly.parquet` chá»©a dá»¯ liá»‡u + cá»™t "IF_Anomaly" (0 = bÃ¬nh thÆ°á»ng, 1 = báº¥t thÆ°á»ng)

#### BÆ°á»›c 3: Training Model Classifier (PhÃ¢n Loáº¡i Lá»—i)

**File**: `src/classifier.py`

**QuÃ¡ trÃ¬nh**:

1. Äá»c file tá»« bÆ°á»›c 2 (Ä‘Ã£ cÃ³ nhÃ£n Anomaly)
2. Chá»n 26 thÃ´ng sá»‘ Ä‘áº§y Ä‘á»§
3. **XGBoost** (thuáº­t toÃ¡n) há»c phÃ¢n loáº¡i:
   - Input: 26 thÃ´ng sá»‘ cáº£m biáº¿n
   - Output: Loáº¡i lá»—i (Battery Aging, Motor Overheat, Brake Failure...)
4. Xá»­ lÃ½ **class imbalance** (cÃ³ Ã­t dá»¯ liá»‡u lá»—i hÆ¡n dá»¯ liá»‡u bÃ¬nh thÆ°á»ng)
5. LÆ°u model vÃ o `models/classifier/`

**VÃ­ dá»¥ dá»… hiá»ƒu**:

- BÃ¡c sÄ© nhÃ¬n triá»‡u chá»©ng â†’ Cháº©n Ä‘oÃ¡n bá»‡nh
- Model nhÃ¬n 26 thÃ´ng sá»‘ â†’ Dá»± Ä‘oÃ¡n loáº¡i lá»—i

**Káº¿t quáº£**: Model biáº¿t phÃ¢n loáº¡i: "ÄÃ¢y lÃ  lá»—i pin" hay "ÄÃ¢y lÃ  lá»—i motor"

#### BÆ°á»›c 4: Training Model RUL (Dá»± ÄoÃ¡n Tuá»•i Thá» CÃ²n Láº¡i)

**File**: `src/rul.py`

**QuÃ¡ trÃ¬nh**:

1. Äá»c dá»¯ liá»‡u tá»« bÆ°á»›c 2
2. Sá»­ dá»¥ng káº¿t quáº£ tá»« bÆ°á»›c 3 (loáº¡i lá»—i) nhÆ° má»™t thÃ´ng sá»‘ Ä‘áº§u vÃ o
3. **LightGBM** (thuáº­t toÃ¡n) há»c dá»± Ä‘oÃ¡n:
   - Input: 26 thÃ´ng sá»‘ + loáº¡i lá»—i
   - Output: Sá»‘ chu ká»³ cÃ²n láº¡i trÆ°á»›c khi há»ng (RUL)
4. LÆ°u model vÃ o `models/rul/`

**VÃ­ dá»¥ dá»… hiá»ƒu**:

- BÃ¡c sÄ©: "Bá»‡nh nhÃ¢n nÃ y cÃ²n sá»‘ng Ä‘Æ°á»£c khoáº£ng 6 thÃ¡ng"
- Model: "Xe nÃ y cÃ²n cháº¡y Ä‘Æ°á»£c khoáº£ng 500 chu ká»³ sáº¡c"

**Káº¿t quáº£**: Model biáº¿t dá»± Ä‘oÃ¡n: "CÃ²n bao lÃ¢u ná»¯a thÃ¬ há»ng?"

#### BÆ°á»›c 5: LÆ°u VÃ o MLflow

**File**: `src/train.py`

**QuÃ¡ trÃ¬nh**:

1. Cháº¡y láº§n lÆ°á»£t 3 bÆ°á»›c trÃªn
2. Upload táº¥t cáº£ models lÃªn MLflow
3. Ghi láº¡i metrics (Ä‘á»™ chÃ­nh xÃ¡c, F1-score, RMSE...)
4. LÆ°u láº¡i parameters (sá»‘ lÆ°á»£ng cÃ¢y, learning rate...)

**Lá»£i Ã­ch**:

- So sÃ¡nh model cÅ© vs má»›i
- Quay láº¡i model cÅ© náº¿u model má»›i tá»‡ hÆ¡n
- Theo dÃµi lá»‹ch sá»­ training

---

### GIAI ÄOáº N 2: INFERENCE (Sá»­ Dá»¥ng Model Äá»ƒ Dá»± ÄoÃ¡n)

#### BÆ°á»›c 1: Nháº­n Request Tá»« NgÆ°á»i DÃ¹ng

**Endpoint**: `POST /predict`

**Input**: Dá»¯ liá»‡u cáº£m biáº¿n tá»« xe (JSON)

```json
{
  "data": {
    "SoC": 0.9,              // Má»©c pin: 90%
    "SoH": 0.95,             // Sá»©c khá»e pin: 95%
    "Battery_Temperature": 25, // Nhiá»‡t Ä‘á»™ pin: 25Â°C
    "Charge_Cycles": 50,      // ÄÃ£ sáº¡c 50 láº§n
    ... (26 thÃ´ng sá»‘)
  }
}
```

#### BÆ°á»›c 2: Anomaly Detection (PhÃ¡t Hiá»‡n Báº¥t ThÆ°á»ng)

**QuÃ¡ trÃ¬nh**:

1. Load model Isolation Forest tá»« `models/anomaly/`
2. Láº¥y 9 thÃ´ng sá»‘ quan trá»ng tá»« input
3. Model kiá»ƒm tra: "Dá»¯ liá»‡u nÃ y cÃ³ báº¥t thÆ°á»ng khÃ´ng?"
4. **Rule Override**: Náº¿u SoH < 60% hoáº·c Charge_Cycles > 2000 â†’ Coi nhÆ° báº¥t thÆ°á»ng

**Káº¿t quáº£**: `IF_Anomaly = 0` (bÃ¬nh thÆ°á»ng) hoáº·c `1` (báº¥t thÆ°á»ng)

**VÃ­ dá»¥**:

- Input: Nhiá»‡t Ä‘á»™ pin = 95Â°C (quÃ¡ nÃ³ng!)
- Model: "Báº¥t thÆ°á»ng!" â†’ `IF_Anomaly = 1`

#### BÆ°á»›c 3: Fault Classification (PhÃ¢n Loáº¡i Lá»—i) - Chá»‰ Khi CÃ³ Anomaly

**QuÃ¡ trÃ¬nh** (chá»‰ cháº¡y náº¿u `IF_Anomaly = 1`):

1. Load model XGBoost tá»« `models/classifier/`
2. Láº¥y 26 thÃ´ng sá»‘ tá»« input
3. Model phÃ¢n loáº¡i: "ÄÃ¢y lÃ  loáº¡i lá»—i gÃ¬?"
4. Decode káº¿t quáº£: Sá»‘ â†’ TÃªn lá»—i (vÃ­ dá»¥: 0 â†’ "Battery Aging")
5. Kiá»ƒm tra: "CÃ³ pháº£i lá»—i khÃ´ng?" (so vá»›i normal_label)

**Káº¿t quáº£**:

- `classifier_label`: "Battery Aging" hoáº·c "Motor Overheat"...
- `is_fault`: `true` (cÃ³ lá»—i) hoáº·c `false` (bÃ¬nh thÆ°á»ng)

**VÃ­ dá»¥**:

- Input: Nhiá»‡t Ä‘á»™ pin cao + Äiá»‡n Ã¡p tháº¥p
- Model: "ÄÃ¢y lÃ  lá»—i Battery Aging" â†’ `classifier_label = "Battery Aging"`, `is_fault = true`

#### BÆ°á»›c 4: RUL Prediction (Dá»± ÄoÃ¡n Tuá»•i Thá») - Chá»‰ Khi CÃ³ Fault

**QuÃ¡ trÃ¬nh** (chá»‰ cháº¡y náº¿u `is_fault = true`):

1. Load model LightGBM tá»« `models/rul/`
2. Láº¥y 26 thÃ´ng sá»‘ + loáº¡i lá»—i tá»« bÆ°á»›c 3
3. Model dá»± Ä‘oÃ¡n: "CÃ²n bao nhiÃªu chu ká»³ ná»¯a thÃ¬ há»ng?"

**Káº¿t quáº£**: `RUL_estimated = 500` (vÃ­ dá»¥: cÃ²n 500 chu ká»³ sáº¡c)

**VÃ­ dá»¥**:

- Input: Lá»—i Battery Aging + CÃ¡c thÃ´ng sá»‘ hiá»‡n táº¡i
- Model: "CÃ²n khoáº£ng 500 chu ká»³ sáº¡c ná»¯a thÃ¬ pin sáº½ há»ng hoÃ n toÃ n"

#### BÆ°á»›c 5: Tráº£ Vá» Káº¿t Quáº£

**Response**:

```json
{
  "IF_Anomaly": 1,
  "classifier_label": "Battery Aging",
  "is_fault": true,
  "RUL_estimated": 500
}
```

#### BÆ°á»›c 6: Gá»­i Cáº£nh BÃ¡o (Náº¿u CÃ³ Anomaly Hoáº·c Fault)

**QuÃ¡ trÃ¬nh**:

1. Náº¿u `IF_Anomaly = 1` hoáº·c `is_fault = true`:
   - TÄƒng counter `anomaly_predictions_total` (Ä‘á»ƒ monitoring)
   - Gá»­i thÃ´ng tin vÃ o **Kafka** (topic: `ev_predictions`)
2. **Alert Service** nháº­n tá»« Kafka:
   - TÄƒng counter `anomaly_events_total`
   - TÄƒng counter `fault_events_total`
   - Cáº­p nháº­t metric `rul_estimated`
3. **Prometheus** scrape metrics tá»«:
   - FastAPI (`/metrics`)
   - Alert Service (`:9101/metrics`)
4. **Prometheus Alerts** kiá»ƒm tra:
   - Náº¿u `anomaly_predictions_total` tÄƒng quÃ¡ nhanh â†’ Gá»­i alert
   - Náº¿u latency quÃ¡ cao â†’ Gá»­i alert
5. **Alertmanager** nháº­n alerts vÃ  cÃ³ thá»ƒ:
   - Gá»­i email
   - Gá»­i Slack notification
   - Gá»­i SMS

---

## ğŸ—ï¸ Kiáº¿n TrÃºc Há»‡ Thá»‘ng - CÃ¡c ThÃ nh Pháº§n LÃ m GÃ¬?

### 1. **FastAPI Inference Server** (MÃ¡y Chá»§ Dá»± ÄoÃ¡n)

**Vai trÃ²**: Nháº­n request, cháº¡y models, tráº£ vá» káº¿t quáº£

**Giá»‘ng nhÆ°**: NhÃ  hÃ ng - nháº­n order, náº¥u Äƒn, phá»¥c vá»¥

**CÃ¡c endpoint**:

- `/predict` - Nháº­n dá»¯ liá»‡u, tráº£ vá» dá»± Ä‘oÃ¡n
- `/health` - Kiá»ƒm tra há»‡ thá»‘ng cÃ³ hoáº¡t Ä‘á»™ng khÃ´ng
- `/metrics` - Tráº£ vá» sá»‘ liá»‡u thá»‘ng kÃª (cho Prometheus)
- `/api/train` - Trigger training má»›i

### 2. **Kafka** (Há»‡ Thá»‘ng Tin Nháº¯n)

**Vai trÃ²**: Chuyá»ƒn tin nháº¯n giá»¯a cÃ¡c pháº§n cá»§a há»‡ thá»‘ng

**Giá»‘ng nhÆ°**: BÆ°u Ä‘iá»‡n - nháº­n thÆ°, phÃ¢n loáº¡i, chuyá»ƒn Ä‘áº¿n Ä‘Ãºng ngÆ°á»i

**Trong há»‡ thá»‘ng**:

- FastAPI gá»­i: "CÃ³ anomaly!" â†’ Kafka topic `ev_predictions`
- Alert Service Ä‘á»c tá»« Kafka â†’ Xá»­ lÃ½ cáº£nh bÃ¡o

**Lá»£i Ã­ch**:

- TÃ¡ch biá»‡t cÃ¡c pháº§n (FastAPI khÃ´ng cáº§n biáº¿t Alert Service)
- Äáº£m báº£o khÃ´ng máº¥t tin nháº¯n (lÆ°u láº¡i náº¿u Alert Service táº¡m thá»i down)

### 3. **Alert Service** (Dá»‹ch Vá»¥ Cáº£nh BÃ¡o)

**Vai trÃ²**: Nháº­n thÃ´ng tin tá»« Kafka, táº¡o metrics, cÃ³ thá»ƒ gá»­i cáº£nh bÃ¡o

**Giá»‘ng nhÆ°**: Trung tÃ¢m Ä‘iá»u hÃ nh - nháº­n thÃ´ng tin, xá»­ lÃ½, bÃ¡o cÃ¡o

**Chá»©c nÄƒng**:

- Äáº¿m sá»‘ anomaly events
- Äáº¿m sá»‘ fault events
- LÆ°u RUL estimate má»›i nháº¥t
- Expose metrics cho Prometheus

### 4. **Prometheus** (Há»‡ Thá»‘ng Thu Tháº­p Sá»‘ Liá»‡u)

**Vai trÃ²**: Thu tháº­p vÃ  lÆ°u trá»¯ metrics tá»« cÃ¡c services

**Giá»‘ng nhÆ°**: Sá»• ghi chÃ©p - ghi láº¡i má»i sá»‘ liá»‡u quan trá»ng

**Chá»©c nÄƒng**:

- Má»—i 10 giÃ¢y: Há»i FastAPI "Báº¡n cÃ³ bao nhiÃªu requests?"
- Má»—i 10 giÃ¢y: Há»i Alert Service "Báº¡n cÃ³ bao nhiÃªu anomalies?"
- LÆ°u láº¡i táº¥t cáº£ sá»‘ liá»‡u theo thá»i gian
- Kiá»ƒm tra alert rules: "Náº¿u cÃ³ quÃ¡ nhiá»u anomalies â†’ Gá»­i alert"

### 5. **Grafana** (Dashboard Hiá»ƒn Thá»‹)

**Vai trÃ²**: Hiá»ƒn thá»‹ metrics dÆ°á»›i dáº¡ng biá»ƒu Ä‘á»“, báº£ng

**Giá»‘ng nhÆ°**: Dashboard xe hÆ¡i - hiá»ƒn thá»‹ tá»‘c Ä‘á»™, nhiÃªn liá»‡u báº±ng Ä‘á»“ng há»“, biá»ƒu Ä‘á»“

**Chá»©c nÄƒng**:

- Káº¿t ná»‘i vá»›i Prometheus (tá»± Ä‘á»™ng)
- Hiá»ƒn thá»‹: Sá»‘ requests/giÃ¢y, Latency, Sá»‘ anomalies
- Táº¡o dashboard tÃ¹y chá»‰nh
- Cáº£nh bÃ¡o trá»±c quan (mÃ u Ä‘á» khi cÃ³ váº¥n Ä‘á»)

### 6. **MLflow** (Quáº£n LÃ½ Models)

**Vai trÃ²**: LÆ°u trá»¯ vÃ  quáº£n lÃ½ cÃ¡c láº§n training

**Giá»‘ng nhÆ°**: ThÆ° viá»‡n - lÆ°u trá»¯ sÃ¡ch (models), cÃ³ catalog Ä‘á»ƒ tÃ¬m

**Chá»©c nÄƒng**:

- LÆ°u má»—i láº§n training nhÆ° má»™t "run"
- Ghi láº¡i: Model nÃ o, parameters gÃ¬, káº¿t quáº£ ra sao
- So sÃ¡nh: Model cÅ© vs má»›i, model nÃ o tá»‘t hÆ¡n
- LÆ°u artifacts (files models, confusion matrix...)

### 7. **MinIO** (Kho LÆ°u Trá»¯)

**Vai trÃ²**: LÆ°u trá»¯ files (models, datasets...)

**Giá»‘ng nhÆ°**: Google Drive - lÆ°u files trÃªn cloud

**Chá»©c nÄƒng**:

- MLflow lÆ°u models vÃ o MinIO
- CÃ³ thá»ƒ táº£i vá», backup, restore

### 8. **Alertmanager** (Quáº£n LÃ½ Cáº£nh BÃ¡o)

**Vai trÃ²**: Nháº­n alerts tá»« Prometheus, xá»­ lÃ½ vÃ  gá»­i thÃ´ng bÃ¡o

**Giá»‘ng nhÆ°**: Trung tÃ¢m cuá»™c gá»i kháº©n cáº¥p - nháº­n bÃ¡o, quyáº¿t Ä‘á»‹nh gá»­i Ä‘áº¿n ai

**Chá»©c nÄƒng**:

- Nháº­n alerts tá»« Prometheus
- Quyáº¿t Ä‘á»‹nh: Gá»­i email? SMS? Slack?
- TrÃ¡nh spam (khÃ´ng gá»­i quÃ¡ nhiá»u alerts giá»‘ng nhau)

---

## ğŸ“Š VÃ­ Dá»¥ Workflow HoÃ n Chá»‰nh

### TÃ¬nh Huá»‘ng: Xe Äiá»‡n Äang Cháº¡y, Gá»­i Dá»¯ Liá»‡u Cáº£m Biáº¿n

#### BÆ°á»›c 1: Xe Gá»­i Dá»¯ Liá»‡u

```
Xe Ä‘iá»‡n â†’ Gá»­i dá»¯ liá»‡u cáº£m biáº¿n má»—i 15 phÃºt
â”œâ”€â”€ Nhiá»‡t Ä‘á»™ pin: 95Â°C (QUÃ NÃ“NG!)
â”œâ”€â”€ Äiá»‡n Ã¡p: 200V (tháº¥p)
â”œâ”€â”€ Sá»‘ chu ká»³ sáº¡c: 2100 (nhiá»u)
â””â”€â”€ ... (24 thÃ´ng sá»‘ khÃ¡c)
```

#### BÆ°á»›c 2: FastAPI Nháº­n Request

```
POST /predict
{
  "data": {
    "Battery_Temperature": 95,
    "Battery_Voltage": 200,
    "Charge_Cycles": 2100,
    ...
  }
}
```

#### BÆ°á»›c 3: Anomaly Detection

```
Isolation Forest Model:
â”œâ”€â”€ Kiá»ƒm tra: Nhiá»‡t Ä‘á»™ 95Â°C â†’ Báº¥t thÆ°á»ng!
â”œâ”€â”€ Rule Override: Charge_Cycles = 2100 > 2000 â†’ Báº¥t thÆ°á»ng!
â””â”€â”€ Káº¿t quáº£: IF_Anomaly = 1 âœ…
```

#### BÆ°á»›c 4: Fault Classification

```
XGBoost Model:
â”œâ”€â”€ PhÃ¢n tÃ­ch 26 thÃ´ng sá»‘
â”œâ”€â”€ So sÃ¡nh vá»›i patterns Ä‘Ã£ há»c
â””â”€â”€ Káº¿t quáº£: "Battery Aging" (Pin Ä‘Ã£ giÃ )
    â”œâ”€â”€ classifier_label = "Battery Aging"
    â””â”€â”€ is_fault = true âœ…
```

#### BÆ°á»›c 5: RUL Prediction

```
LightGBM Model:
â”œâ”€â”€ Input: 26 thÃ´ng sá»‘ + "Battery Aging"
â”œâ”€â”€ Dá»± Ä‘oÃ¡n dá»±a trÃªn lá»‹ch sá»­
â””â”€â”€ Káº¿t quáº£: RUL_estimated = 300
    â†’ "CÃ²n khoáº£ng 300 chu ká»³ sáº¡c ná»¯a thÃ¬ pin há»ng hoÃ n toÃ n"
```

#### BÆ°á»›c 6: Tráº£ Vá» Káº¿t Quáº£

```json
{
  "IF_Anomaly": 1,
  "classifier_label": "Battery Aging",
  "is_fault": true,
  "RUL_estimated": 300
}
```

#### BÆ°á»›c 7: Gá»­i Cáº£nh BÃ¡o

```
FastAPI â†’ Kafka (topic: ev_predictions)
  â†’ Alert Service nháº­n
    â†’ TÄƒng counter: anomaly_events_total
    â†’ TÄƒng counter: fault_events_total
    â†’ Prometheus scrape metrics
      â†’ Kiá»ƒm tra alert rules
        â†’ "CÃ³ quÃ¡ nhiá»u anomalies!" â†’ Alertmanager
          â†’ Gá»­i email/Slack cho ká»¹ sÆ°
```

#### BÆ°á»›c 8: Monitoring

```
Grafana Dashboard hiá»ƒn thá»‹:
â”œâ”€â”€ Biá»ƒu Ä‘á»“: Sá»‘ anomalies/giá» (tÄƒng Ä‘á»™t biáº¿n!)
â”œâ”€â”€ Báº£ng: CÃ¡c lá»—i phá»• biáº¿n (Battery Aging: 10 láº§n)
â””â”€â”€ Cáº£nh bÃ¡o: "High Anomaly Rate" (mÃ u Ä‘á»)
```

---

## ğŸ” Giáº£i ThÃ­ch CÃ¡c Thuáº­t ToÃ¡n

### 1. **Isolation Forest (Rá»«ng CÃ´ Láº­p)**

**Má»¥c Ä‘Ã­ch**: PhÃ¡t hiá»‡n Ä‘iá»ƒm báº¥t thÆ°á»ng

**CÃ¡ch hoáº¡t Ä‘á»™ng** (Ä‘Æ¡n giáº£n):

1. Táº¡o nhiá»u "cÃ¢y" ngáº«u nhiÃªn
2. Má»—i cÃ¢y cá»‘ gáº¯ng "cÃ´ láº­p" (tÃ¡ch biá»‡t) má»™t Ä‘iá»ƒm
3. Äiá»ƒm báº¥t thÆ°á»ng dá»… cÃ´ láº­p hÆ¡n (Ã­t Ä‘iá»ƒm xung quanh)
4. Náº¿u nhiá»u cÃ¢y cÃ´ láº­p Ä‘Æ°á»£c Ä‘iá»ƒm Ä‘Ã³ â†’ Äiá»ƒm Ä‘Ã³ lÃ  báº¥t thÆ°á»ng

**VÃ­ dá»¥**:

- Trong lá»›p 30 há»c sinh, 29 ngÆ°á»i cao 1.6m-1.8m
- CÃ³ 1 ngÆ°á»i cao 2.2m â†’ Dá»… "cÃ´ láº­p" â†’ Báº¥t thÆ°á»ng!

### 2. **XGBoost (Extreme Gradient Boosting)**

**Má»¥c Ä‘Ã­ch**: PhÃ¢n loáº¡i (classification) - "ÄÃ¢y lÃ  loáº¡i lá»—i gÃ¬?"

**CÃ¡ch hoáº¡t Ä‘á»™ng** (Ä‘Æ¡n giáº£n):

1. Táº¡o nhiá»u "cÃ¢y quyáº¿t Ä‘á»‹nh" (decision trees)
2. Má»—i cÃ¢y há»c tá»« lá»—i cá»§a cÃ¢y trÆ°á»›c
3. Káº¿t há»£p táº¥t cáº£ cÃ¢y â†’ Dá»± Ä‘oÃ¡n chÃ­nh xÃ¡c hÆ¡n

**VÃ­ dá»¥**:

- CÃ¢y 1: "Náº¿u nhiá»‡t Ä‘á»™ > 90Â°C â†’ CÃ³ thá»ƒ lÃ  lá»—i pin"
- CÃ¢y 2: "Náº¿u Ä‘iá»‡n Ã¡p < 250V â†’ XÃ¡c nháº­n lá»—i pin"
- CÃ¢y 3: "Náº¿u sá»‘ chu ká»³ > 2000 â†’ XÃ¡c nháº­n lá»—i pin"
- Káº¿t há»£p 3 cÃ¢y â†’ "ÄÃ¢y cháº¯c cháº¯n lÃ  lá»—i Battery Aging"

### 3. **LightGBM (Light Gradient Boosting Machine)**

**Má»¥c Ä‘Ã­ch**: Há»“i quy (regression) - "CÃ²n bao nhiÃªu chu ká»³ ná»¯a?"

**CÃ¡ch hoáº¡t Ä‘á»™ng**: TÆ°Æ¡ng tá»± XGBoost nhÆ°ng:

- Nhanh hÆ¡n
- DÃ¹ng Ã­t bá»™ nhá»› hÆ¡n
- PhÃ¹ há»£p cho dá»¯ liá»‡u lá»›n

**VÃ­ dá»¥**:

- Input: Nhiá»‡t Ä‘á»™ cao + Äiá»‡n Ã¡p tháº¥p + ÄÃ£ sáº¡c 2100 láº§n
- Model: "Dá»±a trÃªn pattern Ä‘Ã£ há»c, pin nÃ y cÃ²n khoáº£ng 300 chu ká»³ ná»¯a"

---

## ğŸ“ Táº¡i Sao Cáº§n 3 Models?

### Model 1: Anomaly Detection (PhÃ¡t Hiá»‡n Báº¥t ThÆ°á»ng)

- **Má»¥c Ä‘Ã­ch**: Lá»c nhanh - "CÃ³ gÃ¬ báº¥t thÆ°á»ng khÃ´ng?"
- **Lá»£i Ã­ch**: KhÃ´ng cáº§n cháº¡y 2 model sau náº¿u khÃ´ng cÃ³ báº¥t thÆ°á»ng â†’ Tiáº¿t kiá»‡m tÃ i nguyÃªn
- **VÃ­ dá»¥**: Giá»‘ng nhÆ° bÃ¡c sÄ© khÃ¡m sÆ¡ bá»™ trÆ°á»›c khi lÃ m xÃ©t nghiá»‡m chi tiáº¿t

### Model 2: Fault Classification (PhÃ¢n Loáº¡i Lá»—i)

- **Má»¥c Ä‘Ã­ch**: XÃ¡c Ä‘á»‹nh loáº¡i lá»—i cá»¥ thá»ƒ
- **Lá»£i Ã­ch**: Biáº¿t sá»­a cÃ¡i gÃ¬, mua phá»¥ tÃ¹ng gÃ¬
- **VÃ­ dá»¥**: KhÃ´ng chá»‰ biáº¿t "cÃ³ lá»—i", mÃ  cÃ²n biáº¿t "lá»—i pin" hay "lá»—i motor"

### Model 3: RUL Prediction (Dá»± ÄoÃ¡n Tuá»•i Thá»)

- **Má»¥c Ä‘Ã­ch**: Biáº¿t cÃ²n bao lÃ¢u ná»¯a thÃ¬ há»ng
- **Lá»£i Ã­ch**: LÃªn káº¿ hoáº¡ch sá»­a chá»¯a, Ä‘áº·t phá»¥ tÃ¹ng trÆ°á»›c
- **VÃ­ dá»¥**: "CÃ²n 300 chu ká»³ ná»¯a" â†’ Sáº¯p xáº¿p lá»‹ch sá»­a trong 2 thÃ¡ng tá»›i

---

## ğŸ”„ VÃ²ng Äá»i Cá»§a Má»™t Request

```
1. Client gá»­i request
   â†“
2. FastAPI nháº­n táº¡i /predict
   â†“
3. Middleware báº¯t Ä‘áº§u Ä‘o thá»i gian
   â†“
4. Anomaly Detection
   â”œâ”€â”€ Náº¿u bÃ¬nh thÆ°á»ng â†’ Tráº£ vá» ngay
   â””â”€â”€ Náº¿u báº¥t thÆ°á»ng â†’ Tiáº¿p tá»¥c
   â†“
5. Fault Classification
   â”œâ”€â”€ Náº¿u khÃ´ng pháº£i lá»—i â†’ Tráº£ vá»
   â””â”€â”€ Náº¿u lÃ  lá»—i â†’ Tiáº¿p tá»¥c
   â†“
6. RUL Prediction
   â†“
7. TÄƒng metrics (anomaly_predictions_total náº¿u cÃ³ anomaly)
   â†“
8. Gá»­i vÃ o Kafka (náº¿u cÃ³ anomaly/fault)
   â†“
9. Middleware káº¿t thÃºc, ghi latency
   â†“
10. Tráº£ vá» response cho client
```

---

## ğŸ“ˆ Monitoring & Alerts - GiÃ¡m SÃ¡t Há»‡ Thá»‘ng

### Metrics Quan Trá»ng

1. **inference_requests_total**

   - **NghÄ©a**: Tá»•ng sá»‘ requests Ä‘Ã£ xá»­ lÃ½
   - **DÃ¹ng Ä‘á»ƒ**: Biáº¿t há»‡ thá»‘ng cÃ³ Ä‘ang hoáº¡t Ä‘á»™ng khÃ´ng
   - **Alert**: Náº¿u = 0 trong 5 phÃºt â†’ "KhÃ´ng cÃ³ traffic"

2. **inference_request_latency_seconds**

   - **NghÄ©a**: Thá»i gian xá»­ lÃ½ má»—i request
   - **DÃ¹ng Ä‘á»ƒ**: Äáº£m báº£o há»‡ thá»‘ng nhanh
   - **Alert**: Náº¿u p95 > 500ms â†’ "Há»‡ thá»‘ng cháº­m"

3. **anomaly_predictions_total**
   - **NghÄ©a**: Tá»•ng sá»‘ láº§n phÃ¡t hiá»‡n anomaly
   - **DÃ¹ng Ä‘á»ƒ**: Theo dÃµi sá»‘ lÆ°á»£ng xe cÃ³ váº¥n Ä‘á»
   - **Alert**: Náº¿u tÄƒng quÃ¡ nhanh (5+ trong 2 phÃºt) â†’ "CÃ³ váº¥n Ä‘á» nghiÃªm trá»ng"

### Alerts ÄÃ£ Cáº¥u HÃ¬nh

1. **FastAPIInferenceDown**

   - **Khi nÃ o**: FastAPI khÃ´ng pháº£n há»“i trong 30 giÃ¢y
   - **Ã nghÄ©a**: Há»‡ thá»‘ng bá»‹ down
   - **HÃ nh Ä‘á»™ng**: Kiá»ƒm tra logs, restart service

2. **HighInferenceLatency**

   - **Khi nÃ o**: p95 latency > 500ms trong 1 phÃºt
   - **Ã nghÄ©a**: Há»‡ thá»‘ng cháº­m, cÃ³ thá»ƒ quÃ¡ táº£i
   - **HÃ nh Ä‘á»™ng**: Kiá»ƒm tra tÃ i nguyÃªn, scale up

3. **HighAnomalyRate**

   - **Khi nÃ o**: 5+ anomalies trong 2 phÃºt
   - **Ã nghÄ©a**: CÃ³ nhiá»u xe cÃ³ váº¥n Ä‘á»
   - **HÃ nh Ä‘á»™ng**: Kiá»ƒm tra dá»¯ liá»‡u, cÃ³ thá»ƒ cÃ³ bug trong model

4. **NoInferenceTraffic**
   - **Khi nÃ o**: KhÃ´ng cÃ³ request nÃ o trong 5 phÃºt
   - **Ã nghÄ©a**: Client khÃ´ng gá»­i dá»¯ liá»‡u, hoáº·c cÃ³ váº¥n Ä‘á» káº¿t ná»‘i
   - **HÃ nh Ä‘á»™ng**: Kiá»ƒm tra client, network

---

## ğŸ› ï¸ CÃ¡c File Quan Trá»ng Trong Há»‡ Thá»‘ng

### Training Scripts

1. **`src/anomaly.py`**

   - Train Isolation Forest
   - Táº¡o file parquet vá»›i cá»™t IF_Anomaly

2. **`src/classifier.py`**

   - Train XGBoost classifier
   - Xá»­ lÃ½ class imbalance
   - LÆ°u confusion matrix

3. **`src/rul.py`**

   - Train LightGBM RUL model
   - TÃ­nh RMSE, MAE, RÂ²

4. **`src/train.py`**
   - Orchestrator - cháº¡y 3 scripts trÃªn
   - Upload lÃªn MLflow

### Inference

5. **`src/inference_server.py`**
   - FastAPI application
   - Load models, xá»­ lÃ½ requests
   - Expose endpoints

### Monitoring

6. **`monitoring/prometheus.yml`**

   - Cáº¥u hÃ¬nh Prometheus
   - Äá»‹nh nghÄ©a jobs Ä‘á»ƒ scrape

7. **`monitoring/alerts.yml`**

   - Äá»‹nh nghÄ©a alert rules
   - Khi nÃ o gá»­i alert, gá»­i gÃ¬

8. **`monitoring/grafana/provisioning/`**
   - Tá»± Ä‘á»™ng cáº¥u hÃ¬nh Grafana
   - Datasource, dashboards

### Alert Service

9. **`alert_service/main.py`**
   - Äá»c tá»« Kafka
   - Táº¡o metrics
   - Expose cho Prometheus

---

## â“ CÃ¢u Há»i ThÆ°á»ng Gáº·p (FAQ)

### Q1: Táº¡i sao cáº§n 3 models riÃªng biá»‡t?

**A**: Má»—i model giáº£i quyáº¿t má»™t váº¥n Ä‘á» khÃ¡c nhau:

- Anomaly: "CÃ³ báº¥t thÆ°á»ng khÃ´ng?" â†’ Nhanh, ráº»
- Classifier: "Lá»—i gÃ¬?" â†’ Cáº§n biáº¿t Ä‘á»ƒ sá»­a Ä‘Ãºng
- RUL: "CÃ²n bao lÃ¢u?" â†’ Cáº§n biáº¿t Ä‘á»ƒ lÃªn káº¿ hoáº¡ch

Náº¿u chá»‰ dÃ¹ng 1 model â†’ Phá»©c táº¡p, cháº­m, khÃ³ maintain.

### Q2: Táº¡i sao cáº§n Kafka?

**A**:

- **TÃ¡ch biá»‡t**: FastAPI khÃ´ng cáº§n biáº¿t Alert Service
- **Reliability**: Náº¿u Alert Service down, messages Ä‘Æ°á»£c lÆ°u láº¡i
- **Scalability**: CÃ³ thá»ƒ thÃªm nhiá»u services Ä‘á»c tá»« Kafka
- **Async**: FastAPI khÃ´ng pháº£i Ä‘á»£i Alert Service xá»­ lÃ½ xong

### Q3: Táº¡i sao cáº§n Prometheus + Grafana?

**A**:

- **Prometheus**: Thu tháº­p vÃ  lÆ°u trá»¯ metrics (database)
- **Grafana**: Hiá»ƒn thá»‹ metrics (dashboard)

Giá»‘ng nhÆ°: Excel lÆ°u sá»‘ liá»‡u, PowerPoint hiá»ƒn thá»‹ biá»ƒu Ä‘á»“.

### Q4: Model cÃ³ tá»± cáº­p nháº­t khÃ´ng?

**A**: KhÃ´ng tá»± Ä‘á»™ng. Cáº§n:

1. Train model má»›i: `docker compose run --rm trainer`
2. Models Ä‘Æ°á»£c lÆ°u vÃ o `models/`
3. Restart FastAPI: `docker compose restart fastapi-inference`
4. FastAPI tá»± Ä‘á»™ng load models má»›i

### Q5: LÃ m sao biáº¿t model má»›i tá»‘t hÆ¡n model cÅ©?

**A**: Xem trong MLflow:

- So sÃ¡nh metrics: Accuracy, F1-score, RMSE
- Model nÃ o cÃ³ metrics tá»‘t hÆ¡n â†’ Model Ä‘Ã³ tá»‘t hÆ¡n
- CÃ³ thá»ƒ quay láº¡i model cÅ© náº¿u model má»›i tá»‡ hÆ¡n

### Q6: Há»‡ thá»‘ng cÃ³ thá»ƒ xá»­ lÃ½ bao nhiÃªu requests/giÃ¢y?

**A**: Phá»¥ thuá»™c vÃ o:

- Hardware (CPU, RAM)
- Model complexity
- ThÆ°á»ng: 10-100 requests/giÃ¢y trÃªn mÃ¡y thÃ´ng thÆ°á»ng

CÃ³ thá»ƒ scale báº±ng cÃ¡ch:

- ThÃªm nhiá»u FastAPI instances
- DÃ¹ng load balancer

### Q7: Dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u á»Ÿ Ä‘Ã¢u?

**A**:

- **Training data**: File CSV trong `src/data/`
- **Models**: ThÆ° má»¥c `models/` (local) + MLflow (remote)
- **Metrics**: Prometheus database
- **Artifacts**: MinIO (S3-compatible storage)

### Q8: LÃ m sao backup há»‡ thá»‘ng?

**A**:

- **Models**: Backup thÆ° má»¥c `models/` hoáº·c export tá»« MLflow
- **Configs**: Backup `monitoring/`, `docker-compose.yml`
- **Data**: Backup `src/data/` vÃ  MinIO buckets

---

## ğŸ“š TÃ i Liá»‡u Tham Kháº£o ThÃªm

- `README.md` - HÆ°á»›ng dáº«n cháº¡y nhanh
- `docs/WORKFLOW_GUIDE.md` - Workflow chi tiáº¿t 9 bÆ°á»›c
- `docs/QUICK_WORKFLOW.md` - TÃ³m táº¯t lá»‡nh nhanh
- `docs/DOCKER_WORKFLOW.md` - HÆ°á»›ng dáº«n Docker
- `docs/PROMETHEUS_DEBUG.md` - Debug Prometheus vÃ  alerts

---

## ğŸ¯ TÃ³m Táº¯t

Há»‡ thá»‘ng nÃ y giÃºp:

1. **Dá»± Ä‘oÃ¡n** xe Ä‘iá»‡n sáº¯p há»ng (trÆ°á»›c khi há»ng)
2. **PhÃ¢n loáº¡i** loáº¡i lá»—i cá»¥ thá»ƒ (pin, motor, phanh...)
3. **Æ¯á»›c lÆ°á»£ng** cÃ²n bao lÃ¢u ná»¯a thÃ¬ há»ng
4. **Cáº£nh bÃ¡o** khi cÃ³ váº¥n Ä‘á»
5. **GiÃ¡m sÃ¡t** hiá»‡u suáº¥t há»‡ thá»‘ng

Táº¥t cáº£ tá»± Ä‘á»™ng hÃ³a, giÃºp tiáº¿t kiá»‡m chi phÃ­ vÃ  tÄƒng Ä‘á»™ an toÃ n.

---

**TÃ¡c giáº£**: Há»‡ thá»‘ng MLOps cho Predictive Maintenance  
**PhiÃªn báº£n**: 1.0  
**Cáº­p nháº­t**: 2024
